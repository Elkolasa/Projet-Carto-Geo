<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Livre en ligne</title>

<style>
* { margin: 0; padding: 0; box-sizing: border-box; }

body {
    font-family: sans-serif;
    background-color: #f2f2f2;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    overflow: hidden;
}

.book-container {
    width: 80vw;
    max-width: 600px;
    aspect-ratio: 210 / 297;
    position: relative;
    overflow: hidden;
    box-shadow: 0 10px 20px rgba(0,0,0,0.2);
}

.page {
    width: 100%;
    height: 100%;
    position: absolute;
    top: 0;
    left: 0;
    background-size: contain;
    background-position: center;
    background-repeat: no-repeat;

    transform: translateX(100%); /* hors écran à droite */
    transition: transform 0.45s ease-in-out;
}

.page.active {
    transform: translateX(0); /* page visible */
}

/* page quittant vers la gauche */
.page.to-left {
    transform: translateX(-100%);
}

/* page quittant vers la droite */
.page.to-right {
    transform: translateX(100%);
}
</style>
</head>
<body>

<div class="book-container">
    <div class="page active" style="background-image: url('Images/Couverture.png');"></div>
    <div class="page" style="background-image: url('Images/page2.png');"></div>
    <div class="page" style="background-image: url('Images/page3.png');"></div>
    <div class="page" style="background-image: url('Images/page4.png');"></div>
</div>

<script>
const pages = document.querySelectorAll('.page');
let currentIndex = 0;

function showPage(nextIndex) {
    if (nextIndex === currentIndex) return;

    const goingRight = nextIndex > currentIndex;

    pages.forEach((p, i) => {
        p.classList.remove("active", "to-left", "to-right");

        // Page qui SORT
        if (i === currentIndex) {
            p.classList.add(goingRight ? "to-left" : "to-right");
        }

        // Page qui ENTRE
        if (i === nextIndex) {
            p.style.transform = `translateX(${goingRight ? '100%' : '-100%'})`;
            void p.offsetWidth; // force reflow
            p.classList.add("active");
        }
    });

    currentIndex = nextIndex;
}

// Scroll
let isScrolling = false;
window.addEventListener("wheel", e => {
    if (isScrolling) return;
    isScrolling = true;

    if (e.deltaY > 0 && currentIndex < pages.length - 1)
        showPage(currentIndex + 1);
    else if (e.deltaY < 0 && currentIndex > 0)
        showPage(currentIndex - 1);

    setTimeout(() => isScrolling = false, 500);
});

// Swipe tactile
let startX = 0;
window.addEventListener("touchstart", e => startX = e.touches[0].clientX);
window.addEventListener("touchend", e => {
    let diff = startX - e.changedTouches[0].clientX;
    if (diff > 50 && currentIndex < pages.length - 1)
        showPage(currentIndex + 1);
    else if (diff < -50 && currentIndex > 0)
        showPage(currentIndex - 1);
});

// Clavier
window.addEventListener("keydown", e => {
    if (e.key === "ArrowRight" && currentIndex < pages.length - 1)
        showPage(currentIndex + 1);
    if (e.key === "ArrowLeft" && currentIndex > 0)
        showPage(currentIndex - 1);
});
</script>

</body>
</html>
